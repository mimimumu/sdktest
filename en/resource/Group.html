
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Group Management Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-okaidia.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="Timer.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Overview.html">
            
                <a href="Overview.html">
            
                    
                    Function Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Preparation.html">
            
                <a href="Preparation.html">
            
                    
                    Preparation for integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Integrated.html">
            
                <a href="Integrated.html">
            
                    
                    Integrate SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="User.html">
            
                <a href="User.html">
            
                    
                    User Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="User_Sdk_Update.html">
            
                <a href="User_Sdk_Update.html">
            
                    
                    Migration of a Series of SDK Accounts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="User_mobile.html">
            
                <a href="User_mobile.html">
            
                    
                    Use Mobile Phone
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="User_email.html">
            
                <a href="User_email.html">
            
                    
                    Use Email
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="User_uid.html">
            
                <a href="User_uid.html">
            
                    
                    User uid Login System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="User_Third_Login.html">
            
                <a href="User_Third_Login.html">
            
                    
                    Third Party Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="User_Logout.html">
            
                <a href="User_Logout.html">
            
                    
                    Lougout, Disable account
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="User_Data_Model.html">
            
                <a href="User_Data_Model.html">
            
                    
                    Data Model
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Home management
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="Home_Manager.html">
            
                <a href="Home_Manager.html">
            
                    
                    Home Management Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="Home_Option.html">
            
                <a href="Home_Option.html">
            
                    
                    Operation Class of Home
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="Home_Member.html">
            
                <a href="Home_Member.html">
            
                    
                    Home Member Management Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="Room.html">
            
                <a href="Room.html">
            
                    
                    Room information management
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="Activator.html">
            
                <a href="Activator.html">
            
                    
                    Network Configuration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="Activator_Wifi.html">
            
                <a href="Activator_Wifi.html">
            
                    
                    Wifi Network Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="Activator_Zigbee.html">
            
                <a href="Activator_Zigbee.html">
            
                    
                    ZigBee Gateway Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="Activator_ZigbeeSub.html">
            
                <a href="Activator_ZigbeeSub.html">
            
                    
                    ZigBee Sub-device Configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    [Device Control]
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="Device.html">
            
                <a href="Device.html">
            
                    
                    Device Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="OTA.html">
            
                <a href="OTA.html">
            
                    
                    Firmware upgrade
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="Device_Data_Channel.html">
            
                <a href="Device_Data_Channel.html">
            
                    
                    Data Model
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="Shared.html">
            
                <a href="Shared.html">
            
                    
                    Shared devices
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="Shared_Device_add.html">
            
                <a href="Shared_Device_add.html">
            
                    
                    Add for Sharing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="Shared_Device_Remove.html">
            
                <a href="Shared_Device_Remove.html">
            
                    
                    Removing Sharing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="Shared_Device_Rename.html">
            
                <a href="Shared_Device_Rename.html">
            
                    
                    Modifying Remark Name
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="Timer.html">
            
                <a href="Timer.html">
            
                    
                    Timer task
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.11" data-path="Group.html">
            
                <a href="Group.html">
            
                    
                    Group Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    Smart scene
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="SmartScene_Manager.html">
            
                <a href="SmartScene_Manager.html">
            
                    
                    Smart scene
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="Message.html">
            
                <a href="Message.html">
            
                    
                    Message Center
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="Feedback.html">
            
                <a href="Feedback.html">
            
                    
                    Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="Gateway.html">
            
                <a href="Gateway.html">
            
                    
                    Gateway
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Group Management</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="group-management">Group Management</h1>
<p>The Tuya Cloud supports the group management system. User can create group, change group name, manage devices of group, manage multiple devices via the group and dismiss group.</p>
<h1 id="creating-a-group">Creating a Group</h1>
<p><strong>[Description]</strong></p>
<p>Tuya Smart provides some interfaces for device group control. The group control herein refers to the WiFi group, and currently, only the group control function is available. The group function is disabled by default. If necessary, please contact our staff.</p>
<p><strong>[Method Invocation]</strong></p>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java"><span class="token comment">// Creating a group</span>

TuyaHomeSdk<span class="token punctuation">.</span><span class="token function">newHomeInstance</span><span class="token punctuation">(</span><span class="token string">&quot;homeId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createNewGroup</span><span class="token punctuation">(</span><span class="token string">&quot;productId&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> devIds<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ICreateGroupCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token keyword">long</span> groupId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">// Returnjing groupId</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String errorCode<span class="token punctuation">,</span> String errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>[Notes]</strong></p>
<p>Groups cannot be created by default. If this function is required, please contact us to enable it.</p>
<h2 id="group-list-acquisition">Group List Acquisition</h2>
<p><strong>[Description]</strong></p>
<p>This interface is mainly to obtain the latest group list from the cloud.</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> productId    product id <span class="token punctuation">(</span>obtained from DeviceBean<span class="token punctuation">.</span>getProductId<span class="token punctuation">)</span>
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span>      callback
TuyaHomeSdk<span class="token punctuation">.</span><span class="token function">newHomeInstance</span><span class="token punctuation">(</span><span class="token string">&quot;homeId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getGroupDevList</span><span class="token punctuation">(</span>String productId<span class="token punctuation">,</span>IGetDevsFromGroupByPidCallback callback<span class="token punctuation">)</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java"><span class="token comment">//Obtaning the group list from the cloud</span>
TuyaHomeSdk<span class="token punctuation">.</span><span class="token function">newHomeInstance</span><span class="token punctuation">(</span><span class="token string">&quot;homeId&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">queryDeviceListToAddGroup</span><span class="token punctuation">(</span><span class="token string">&quot;productId&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IGetDevsFromGroupByPidCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span>List<span class="token generics function"><span class="token punctuation">&lt;</span>GroupDeviceBean<span class="token punctuation">&gt;</span></span> bizResult<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>

   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String errorCode<span class="token punctuation">,</span> String errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="group-operation">Group Operation</h2>
<p><strong>[Description]</strong></p>
<p>The group operation of Tuya Smart is mainly based on the operation of the main device, and the main device refers to the first device in the current group online. Online/offline status, and data reporting rely on changes of the main device. Sending control commands is applicable to all devices of the group.</p>
<p><strong>[Instantiation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Instantiation of groups
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> groupId    group Id
ITuyaGroup mITuyaGroup<span class="token operator">=</span> TuyaHomeSdk<span class="token punctuation">.</span><span class="token function">newGroupInstance</span><span class="token punctuation">(</span>groupId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="1-modifying-group-name">(1) Modifying group name**</h3>
<p><strong>[Description]</strong></p>
<p>Modify group name.</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Modifying group name
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> groupId    group Id
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span>      callback
mITuyaGroup<span class="token punctuation">.</span><span class="token function">updateGroupName</span><span class="token punctuation">(</span>IControlCallback callback<span class="token punctuation">)</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java"><span class="token comment">// Renaming group</span>

mITuyaGroup<span class="token punctuation">.</span><span class="token function">updateGroupName</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IControlCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String s<span class="token punctuation">,</span> String s1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="2-modifying-group-device-list">(2) Modifying group device list</h3>
<p><strong>[Description]</strong></p>
<p>Modify group device list.</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Modifying group device list
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> devIds   devIds of device
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span>      callback
mITuyaGroup<span class="token punctuation">.</span><span class="token function">updateGroupRelations</span><span class="token punctuation">(</span>List<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">&gt;</span></span> devIds<span class="token punctuation">,</span>IControlCallback callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java"><span class="token comment">//Modifying group device list</span>

mITuyaGroup<span class="token punctuation">.</span><span class="token function">updateGroupRelations</span><span class="token punctuation">(</span>getSelectedDeviceIds<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IControlCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String errorCode<span class="token punctuation">,</span> String errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="3-dismissing-group">(3) Dismissing group</h3>
<p><strong>[Description]</strong></p>
<p>Dismiss group.</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Dismissing group
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> groupId    group Id
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span>      callback
mITuyaGroup<span class="token punctuation">.</span><span class="token function">dismissGroup</span><span class="token punctuation">(</span>IControlCallback callback<span class="token punctuation">)</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java"><span class="token comment">// Deleting group.</span>

mITuyaGroup<span class="token punctuation">.</span><span class="token function">dismissGroup</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IControlCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String s<span class="token punctuation">,</span> String s1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="4-group-callback-event">(4) Group callback event</h3>
<p><strong>[Description]</strong></p>
<p>Group callback event</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Registering group callback event
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> listener callback
mITuyaGroup<span class="token punctuation">.</span><span class="token function">registerGroupListener</span><span class="token punctuation">(</span>IGroupListener listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
\<span class="token operator">*</span> Cancel group callback event
mITuyaGroup<span class="token punctuation">.</span><span class="token function">unRegisterGroupListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Registering group callback event

mITuyaGroup<span class="token punctuation">.</span><span class="token function">registerGroupListener</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IGroupListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Updating data points of master device</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onDpUpdate</span><span class="token punctuation">(</span>String dps<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Change of online status of master device</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onStatusChanged</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// Change of network status</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onNetworkStatusChanged</span><span class="token punctuation">(</span><span class="token keyword">boolean</span> isNetworkOk<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Cancelling group callback event</span>

mITuyaGroup<span class="token punctuation">.</span><span class="token function">unRegisterGroupListener</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="5-sending-group-control-command">(5) Sending group control command</h3>
<p><strong>[Description]</strong></p>
<p>Send group control command.</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Sending group control command
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> command    control command
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> listener callback
mTuyaGroup<span class="token punctuation">.</span><span class="token function">publishDps</span><span class="token punctuation">(</span>String command<span class="token punctuation">,</span>IControlCallback listener<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java"><span class="token comment">//Code segment for switching on the light in a group</span>
LampBean bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">LampBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
bean<span class="token punctuation">.</span><span class="token function">setOpen</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
HashMap<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token punctuation">&gt;</span></span> hashMap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
hashMap<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>STHEME_LAMP_DPID_1<span class="token punctuation">,</span> bean<span class="token punctuation">.</span><span class="token function">isOpen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
mTuyaGroup<span class="token punctuation">.</span><span class="token function">publishDps</span><span class="token punctuation">(</span>JSONObject<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>hashMap<span class="token punctuation">)</span><span class="token punctuation">,</span>callback<span class="token punctuation">)</span>&#xFF1B;
</code></pre>
<p><strong>[Notes]</strong></p>
<p>The returned result of a command sent from a group means that the command is sent to the cloud successfully, and it does not mean that the device has been actually controlled.</p>
<h3 id="6-obtaining-device-list-of-a-group">(6) Obtaining device list of a group</h3>
<p><strong>[Description]</strong></p>
<p>Obtain the device list of a group from the cloud.</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> listener callback
mTuyaGroup<span class="token punctuation">.</span><span class="token function">getGroupDevList</span><span class="token punctuation">(</span>IGetDevicesInGroupCallback listener<span class="token punctuation">)</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java"><span class="token comment">// Obtaining device list of a group</span>

mITuyaGroup<span class="token punctuation">.</span><span class="token function">getGroupDevList</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">IGetDevicesInGroupCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span>List<span class="token generics function"><span class="token punctuation">&lt;</span>GroupDeviceBean<span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String errorCode<span class="token punctuation">,</span> String errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="7-group-data-acquisition">(7) Group data acquisition</h3>
<p><strong>[Description]</strong></p>
<p>For obtaining the group data locally, the data cannot be obtained before the initialization of Home (invoking getHomeDetail() or getHomeLocalCache).</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Obtaining group data bean locally
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> groupId    group Id
\<span class="token operator">*</span> @<span class="token keyword">return</span> GroupBean  <span class="token keyword">class</span> <span class="token class-name">of</span> group data
TuyaHomeDataManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getGroupBean</span><span class="token punctuation">(</span><span class="token keyword">long</span> groupId<span class="token punctuation">)</span><span class="token punctuation">;</span>

\<span class="token operator">*</span> Obtaining a list of group data locally
\<span class="token operator">*</span> @<span class="token keyword">return</span>  List<span class="token generics function"><span class="token punctuation">&lt;</span>GroupBean<span class="token punctuation">&gt;</span></span>  group list
TuyaHomeDataManager<span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getGroupDeviceList</span><span class="token punctuation">(</span><span class="token keyword">long</span> groupId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="8-group-data-destruction">(8) Group data destruction</h3>
<p>* It is recommended to invoke the group data destruction function when exiting the group control page.</p>
<pre class="language-"><code class="lang-java">mITuyaGroup<span class="token punctuation">.</span><span class="token function">onDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Timer.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Timer task">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Group Management","level":"1.11","depth":1,"next":{"title":"Smart scene","level":"1.12","depth":1,"ref":"","articles":[{"title":"Smart scene","level":"1.12.1","depth":2,"path":"resource/SmartScene_Manager.md","ref":"./resource/SmartScene_Manager.md","articles":[]}]},"previous":{"title":"Timer task","level":"1.10","depth":1,"path":"resource/Timer.md","ref":"./resource/Timer.md","articles":[]},"dir":"ltr"},"config":{"plugins":["js-sequence-diagram-full@>=0.3.1","prism","-highlight"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-okaidia.css"],"lang":{"shell":"shell","java":"java"},"ignore":["sequence"]},"js-sequence-diagram-full":{},"livereload":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"resource/Group.md","mtime":"2018-11-20T10:43:01.809Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-12-22T07:42:26.625Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/sequence-diagram-min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

