
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Timer task Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-okaidia.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Group.html" />
    
    
    <link rel="prev" href="Shared_Device_Rename.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Overview.html">
            
                <a href="Overview.html">
            
                    
                    Function Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="Preparation.html">
            
                <a href="Preparation.html">
            
                    
                    Preparation for integration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="Integrated.html">
            
                <a href="Integrated.html">
            
                    
                    Integrate SDK
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="User.html">
            
                <a href="User.html">
            
                    
                    User Management
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="User_Sdk_Update.html">
            
                <a href="User_Sdk_Update.html">
            
                    
                    Migration of a Series of SDK Accounts
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="User_mobile.html">
            
                <a href="User_mobile.html">
            
                    
                    Use Mobile Phone
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="User_email.html">
            
                <a href="User_email.html">
            
                    
                    Use Email
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="User_uid.html">
            
                <a href="User_uid.html">
            
                    
                    User uid Login System
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="User_Third_Login.html">
            
                <a href="User_Third_Login.html">
            
                    
                    Third Party Login
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="User_Logout.html">
            
                <a href="User_Logout.html">
            
                    
                    Lougout, Disable account
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="User_Data_Model.html">
            
                <a href="User_Data_Model.html">
            
                    
                    Data Model
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" >
            
                <span>
            
                    
                    Home management
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="Home_Manager.html">
            
                <a href="Home_Manager.html">
            
                    
                    Home Management Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="Home_Option.html">
            
                <a href="Home_Option.html">
            
                    
                    Operation Class of Home
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="Home_Member.html">
            
                <a href="Home_Member.html">
            
                    
                    Home Member Management Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="Room.html">
            
                <a href="Room.html">
            
                    
                    Room information management
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="Activator.html">
            
                <a href="Activator.html">
            
                    
                    Network Configuration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="Activator_Wifi.html">
            
                <a href="Activator_Wifi.html">
            
                    
                    Wifi Network Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="Activator_Zigbee.html">
            
                <a href="Activator_Zigbee.html">
            
                    
                    ZigBee Gateway Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="Activator_ZigbeeSub.html">
            
                <a href="Activator_ZigbeeSub.html">
            
                    
                    ZigBee Sub-device Configuration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" >
            
                <span>
            
                    
                    [Device Control]
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="Device.html">
            
                <a href="Device.html">
            
                    
                    Device Control
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="OTA.html">
            
                <a href="OTA.html">
            
                    
                    Firmware upgrade
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="Device_Data_Channel.html">
            
                <a href="Device_Data_Channel.html">
            
                    
                    Data Model
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="Shared.html">
            
                <a href="Shared.html">
            
                    
                    Shared devices
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="Shared_Device_add.html">
            
                <a href="Shared_Device_add.html">
            
                    
                    Add for Sharing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="Shared_Device_Remove.html">
            
                <a href="Shared_Device_Remove.html">
            
                    
                    Removing Sharing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="Shared_Device_Rename.html">
            
                <a href="Shared_Device_Rename.html">
            
                    
                    Modifying Remark Name
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.10" data-path="Timer.html">
            
                <a href="Timer.html">
            
                    
                    Timer task
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="Group.html">
            
                <a href="Group.html">
            
                    
                    Group Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" >
            
                <span>
            
                    
                    Smart scene
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="SmartScene_Manager.html">
            
                <a href="SmartScene_Manager.html">
            
                    
                    Smart scene
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="Message.html">
            
                <a href="Message.html">
            
                    
                    Message Center
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="Feedback.html">
            
                <a href="Feedback.html">
            
                    
                    Feedback
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="Gateway.html">
            
                <a href="Gateway.html">
            
                    
                    Gateway
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Timer task</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="timer-task">Timer task</h1>
<p>Tuya Smart provides basic timing capabilities, and supports devices (including WiFi devices, Bluetooth mesh sub-devices and zigbee sub-devices) and groups. It is also provided with the interface for addition, deletion, change and querying of timer information for dp points of the device. After the APP sets the timer information through the timing interface, the hardware module automatically performs the scheduled operation according to the timing requirements. Multiple timers can be included in each timer task, as shown in the figure below:</p>
<p><img src="images/android-sdk-timer.jpg" alt=""></p>
<p>All methods related to timing are included in TuyaHomeSdk.getTimerManagerInstance().</p>
<p>The taskName is used by multiple interfaces, which can be described as a group, and a group may include multiple timers. Each timer task belongs to or does not belong to a group, and the group is currently only used for presentation.</p>
<h2 id="adding-timer">Adding Timer</h2>
<p><strong>[Description]</strong></p>
<p>Add one timer.</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span>  Add a single dp point of timer <span class="token punctuation">(</span><span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> the sub<span class="token operator">-</span>device is supported<span class="token punctuation">.</span>
\<span class="token operator">*</span>  <span class="token annotation punctuation">@param</span> taskName     name of timer task
\<span class="token operator">*</span>  <span class="token annotation punctuation">@param</span> loops        number of loops<span class="token operator">:</span> &quot;<span class="token number">0000000</span>&#x201D;<span class="token punctuation">;</span> <span class="token number">0</span> denotes off<span class="token punctuation">,</span> and <span class="token number">1</span> denotes on<span class="token punctuation">.</span> Each <span class="token number">0</span> from the left to the right denotes<span class="token operator">:</span> Sunday<span class="token punctuation">,</span> Monday<span class="token punctuation">,</span> Tuesday<span class="token punctuation">,</span> Wednesday<span class="token punctuation">,</span> Thursday<span class="token punctuation">,</span> Friday and Saturday<span class="token punctuation">,</span> respectively<span class="token punctuation">.</span>
\<span class="token operator">*</span>  <span class="token annotation punctuation">@param</span> devId        device Id or group Id

\<span class="token operator">*</span>  <span class="token annotation punctuation">@param</span> dpId              id of dp point

\<span class="token operator">*</span>  <span class="token annotation punctuation">@param</span> time         time clock in a timer task

\<span class="token operator">*</span>  <span class="token annotation punctuation">@param</span> callback     callback

<span class="token keyword">void</span> <span class="token function">addTimerWithTask</span><span class="token punctuation">(</span>String taskName<span class="token punctuation">,</span> String loops<span class="token punctuation">,</span> String devId<span class="token punctuation">,</span> String dpId<span class="token punctuation">,</span> String time<span class="token punctuation">,</span> <span class="token keyword">final</span> IResultStatusCallback callback<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">/**
 \* Add a timer          the new interface of a device is supported.
 \* Meanings of other parameter values are the same as above.
 \* @param dps    key-value pair of dp point; key: dpId; value: dpValue (only a single dp point is supported)
 \* @param callback
 */</span>
<span class="token keyword">void</span> <span class="token function">addTimerWithTask</span><span class="token punctuation">(</span>String taskName<span class="token punctuation">,</span> String devId<span class="token punctuation">,</span> String loops<span class="token punctuation">,</span> Map<span class="token generics function"><span class="token punctuation">&lt;</span>String<span class="token punctuation">,</span> Object<span class="token punctuation">&gt;</span></span> dps<span class="token punctuation">,</span> String time<span class="token punctuation">,</span> <span class="token keyword">final</span> IResultStatusCallback callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java">TuyaHomeSdk<span class="token punctuation">.</span><span class="token function">getTimerManagerInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTimerWithTask</span><span class="token punctuation">(</span><span class="token string">&quot;task01&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;1111111&quot;</span><span class="token punctuation">,</span>mDevId<span class="token punctuation">,</span>  <span class="token string">&quot;1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;14:29&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IResultStatusCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> &#x201C;adding timer tasks succeeded&quot;<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String errorCode<span class="token punctuation">,</span> String errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> <span class="token string">&quot;adding timer tasks failed&quot;</span> <span class="token operator">+</span> errorMsg<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="obtaining-states-of-all-timer-tasks-of-a-certain-device">Obtaining States of All Timer Tasks of a Certain Device</h3>
<p><strong>[Description]</strong></p>
<p>Obtain states of all timer tasks of a certain device.</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Obtain states of all timer tasks of a certain device<span class="token punctuation">.</span>
<span class="token operator">*</span>
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> devId    device Id
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span>      callback

<span class="token keyword">void</span> <span class="token function">getTimerTaskStatusWithDeviceId</span><span class="token punctuation">(</span>String devId<span class="token punctuation">,</span> <span class="token keyword">final</span> IGetDeviceTimerStatusCallback callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java">TuyaHomeSdk<span class="token punctuation">.</span><span class="token function">getTimerManagerInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTimerTaskStatusWithDeviceId</span><span class="token punctuation">(</span>mDevId<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IGetDeviceTimerStatusCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span>ArrayList<span class="token generics function"><span class="token punctuation">&lt;</span>TimerTaskStatus<span class="token punctuation">&gt;</span></span> list<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> &#x201C;obtaining states of timer tasks of a device succeeded&quot;<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String errorCode<span class="token punctuation">,</span> String errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> <span class="token string">&quot;obtaining states of timer tasks of a device failed&quot;</span> <span class="token operator">+</span> errorMsg<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="controlling-switch-status-of-all-timers-in-a-timer-task">Controlling Switch Status of all Timers in a Timer Task</h3>
<p><strong>[Description]</strong></p>
<p>Control switch status of all timers in a timer task.</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Control <span class="token keyword">switch</span> status of all timers in a timer task<span class="token punctuation">.</span>
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> taskName    name of timer task
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> devId    device Id or group I
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> status   status value <span class="token number">1</span><span class="token operator">:</span> on<span class="token punctuation">;</span> <span class="token number">0</span><span class="token operator">:</span> off
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span>      callback
<span class="token keyword">void</span> <span class="token function">updateTimerTaskStatusWithTask</span><span class="token punctuation">(</span>String taskName<span class="token punctuation">,</span> String devId<span class="token punctuation">,</span> <span class="token keyword">int</span> status<span class="token punctuation">,</span> <span class="token keyword">final</span> IResultStatusCallback callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java">TuyaHomeSdk<span class="token punctuation">.</span><span class="token function">getTimerManagerInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">updateTimerTaskStatusWithTask</span><span class="token punctuation">(</span>taskName<span class="token punctuation">,</span> mDevId<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IResultStatusCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> &#x201C;controlling <span class="token keyword">switch</span> status of all timers in a timer task succeeded&quot;<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String errorCode<span class="token punctuation">,</span> String errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> <span class="token string">&quot;controlling switch status of all timers in a timer task failed&quot;</span> <span class="token operator">+</span> errorMsg<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="controlling-switch-status-of-a-timer">Controlling Switch Status of a Timer</h3>
<p><strong>[Description]</strong></p>
<p>Control switch status of a timer.</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Control <span class="token keyword">switch</span> status of a timer<span class="token punctuation">.</span>
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> taskName    name of timer task

\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> devId    device Id or group Id
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> timerId  time clock Id
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> isOpen   <span class="token keyword">switch</span>
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span>      callback
<span class="token keyword">void</span> <span class="token function">updateTimerStatusWithTask</span><span class="token punctuation">(</span>String taskName<span class="token punctuation">,</span> String devId<span class="token punctuation">,</span> String timerId<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isOpen<span class="token punctuation">,</span> IResultStatusCallback callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java">TuyaHomeSdk<span class="token punctuation">.</span><span class="token function">getTimerManagerInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">updateTimerStatusWithTask</span><span class="token punctuation">(</span>taskName<span class="token punctuation">,</span> mDevId<span class="token punctuation">,</span> timeId<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IResultStatusCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> &#x201C;controlling <span class="token keyword">switch</span> status of a timer succeeded&quot;<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String errorCode<span class="token punctuation">,</span> String errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> <span class="token string">&quot;controlling switch status of a timer failed&quot;</span> <span class="token operator">+</span> errorMsg<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h2 id="removing-timer">Removing Timer</h2>
<p><strong>[Description]</strong></p>
<p>Removing timer</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Remove timer
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> taskName    name of timer task
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> devId    device Id or group Id
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> timerId  time clock Id
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span>      callback
<span class="token keyword">void</span> <span class="token function">removeTimerWithTask</span><span class="token punctuation">(</span>String taskName<span class="token punctuation">,</span> String devId<span class="token punctuation">,</span> String timerId<span class="token punctuation">,</span> IResultStatusCallback callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java">TuyaHomeSdk<span class="token punctuation">.</span><span class="token function">getTimerManagerInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeTimerWithTask</span><span class="token punctuation">(</span>taskName<span class="token punctuation">,</span> mDevId<span class="token punctuation">,</span> timeId<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IResultStatusCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

       Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> &#x201C;removing timer succeeded&quot;<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String errorCode<span class="token punctuation">,</span> String errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> <span class="token string">&quot;removing timer failed&quot;</span> <span class="token operator">+</span> errorMsg<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="updating-timer-status">Updating Timer Status</h3>
<p><strong>[Description]</strong></p>
<p>Updating timer status (this interface can modify all attributes of a timer)</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Update timer status<span class="token punctuation">.</span>
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> taskName    name of timer task
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> loops    number of loops <span class="token punctuation">(</span>daily and weekly transmission<span class="token operator">:</span> &#x201D;<span class="token number">1111111</span>&#x201D;<span class="token punctuation">)</span>
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> devId    device Id or group Id
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> timerId  time clock Id
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> dpId     id of dp point
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> time     timing time
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> isOpen      switching on or off 
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span>      callback
<span class="token keyword">void</span> <span class="token function">updateTimerWithTask</span><span class="token punctuation">(</span>String taskName<span class="token punctuation">,</span> String loops<span class="token punctuation">,</span> String devId<span class="token punctuation">,</span> String timerId<span class="token punctuation">,</span> String dpId<span class="token punctuation">,</span> String time<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isOpen<span class="token punctuation">,</span> <span class="token keyword">final</span> IResultStatusCallback callback<span class="token punctuation">)</span><span class="token punctuation">;</span>



<span class="token comment">/**

 \* Updating timer status

 \* @param taskName    name of timer task

 \* @param devId    device id or group Id

 \* @param timerId  time clock Id

 \* @param loops    number of loops

 \* @param instruct    dp point data for timing; only a single dp point is supported (json format); for example:   [{

 \*                 &quot;time&quot;: &quot;20:00&quot;,

 \*                 &quot;dps&quot;: {

 \*                 &quot;1&quot;: true

 \*                 }]

 \* @param callback

 */</span>

<span class="token keyword">void</span> <span class="token function">updateTimerWithTask</span><span class="token punctuation">(</span>String taskName<span class="token punctuation">,</span> String loops<span class="token punctuation">,</span> String devId<span class="token punctuation">,</span> String timerId<span class="token punctuation">,</span> String instruct<span class="token punctuation">,</span> <span class="token keyword">final</span> IResultStatusCallback callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java">TuyaHomeSdk<span class="token punctuation">.</span><span class="token function">getTimerManagerInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">updateTimerWithTask</span><span class="token punctuation">(</span>taskName<span class="token punctuation">,</span><span class="token string">&quot;0011001&quot;</span><span class="token punctuation">,</span> mDevId<span class="token punctuation">,</span> timeId<span class="token punctuation">,</span>  <span class="token string">&quot;[{&quot;</span>time<span class="token string">&quot;: &quot;</span><span class="token number">20</span><span class="token operator">:</span><span class="token number">00</span><span class="token string">&quot;, &quot;</span>dps<span class="token string">&quot;: { &quot;</span><span class="token number">1</span><span class="token string">&quot;: true},{&quot;</span>time<span class="token string">&quot;: &quot;</span><span class="token number">22</span><span class="token operator">:</span><span class="token number">00</span><span class="token string">&quot;,&quot;</span>dps<span class="token string">&quot;: {&quot;</span><span class="token number">2</span><span class="token string">&quot;: true}]&quot;</span><span class="token punctuation">,</span>  <span class="token keyword">new</span> <span class="token class-name">IResultStatusCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> &#x201C;updating timer attribute succeeded&quot;<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String errorCode<span class="token punctuation">,</span> String errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> <span class="token string">&quot;updating timer attribute failed&quot;</span> <span class="token operator">+</span> errorMsg<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="obtain-all-timers-of-timer-task">Obtain All Timers of Timer Task</h3>
<p><strong>[Description]</strong></p>
<p>Obtain all timers of timer task.</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Obtaining all timers of timer task<span class="token punctuation">.</span>
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> taskName    name of timer task
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> devId    device Id or group Id
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span>      callback
<span class="token keyword">void</span> <span class="token function">getTimerWithTask</span><span class="token punctuation">(</span>String taskName<span class="token punctuation">,</span> String devId<span class="token punctuation">,</span> <span class="token keyword">final</span> IGetTimerWithTaskCallback callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java">TuyaHomeSdk<span class="token punctuation">.</span><span class="token function">getTimerManagerInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTimerWithTask</span><span class="token punctuation">(</span>taskName<span class="token punctuation">,</span> mDevId<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IGetTimerWithTaskCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span>TimerTask timerTask<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> &#x201C;obtaining timers of timer tasks succeeded&quot;<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String errorCode<span class="token punctuation">,</span> String errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> <span class="token string">&quot;obtaining timers of timer tasks failed&quot;</span> <span class="token operator">+</span> errorMsg<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="obtaining-all-timers-of-all-timer-tasks-for-a-device">Obtaining All Timers of All Timer Tasks for a Device</h3>
<p><strong>[Description]</strong></p>
<p>Obtain all timers of all timer tasks for a device.</p>
<p><strong>[Method Invocation]</strong></p>
<pre class="language-"><code class="lang-java">\<span class="token operator">*</span> Obtaining all timers of all timer tasks <span class="token keyword">for</span> a device<span class="token punctuation">.</span>
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span> devId    device Id or group Id
\<span class="token operator">*</span> <span class="token annotation punctuation">@param</span>      callback
<span class="token keyword">void</span> <span class="token function">getAllTimerWithDeviceId</span><span class="token punctuation">(</span>String devId<span class="token punctuation">,</span> <span class="token keyword">final</span> IGetAllTimerWithDevIdCallback callback<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><strong>[Example Codes]</strong></p>
<pre class="language-"><code class="lang-java">TuyaHomeSdk<span class="token punctuation">.</span><span class="token function">getTimerManagerInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAllTimerWithDeviceId</span><span class="token punctuation">(</span>mDevId<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">IGetAllTimerWithDevIdCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onSuccess</span><span class="token punctuation">(</span>ArrayList<span class="token generics function"><span class="token punctuation">&lt;</span>TimerTask<span class="token punctuation">&gt;</span></span> taskArrayList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> &#x201C;obtaining timers <span class="token keyword">for</span> a device succeeded&quot;<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onError</span><span class="token punctuation">(</span>String errorCode<span class="token punctuation">,</span> String errorMsg<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Toast<span class="token punctuation">.</span><span class="token function">makeText</span><span class="token punctuation">(</span>mContext<span class="token punctuation">,</span> <span class="token string">&quot;obtaining timers for a device failed&quot;</span> <span class="token operator">+</span> errorMsg<span class="token punctuation">,</span> Toast<span class="token punctuation">.</span>LENGTH_LONG<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Shared_Device_Rename.html" class="navigation navigation-prev " aria-label="Previous page: Modifying Remark Name">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Group.html" class="navigation navigation-next " aria-label="Next page: Group Management">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Timer task","level":"1.10","depth":1,"next":{"title":"Group Management","level":"1.11","depth":1,"path":"resource/Group.md","ref":"./resource/Group.md","articles":[]},"previous":{"title":"Modifying Remark Name","level":"1.9.3","depth":2,"path":"resource/Shared_Device_Rename.md","ref":"./resource/Shared_Device_Rename.md","articles":[]},"dir":"ltr"},"config":{"plugins":["js-sequence-diagram-full@>=0.3.1","prism","-highlight"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["prismjs/themes/prism-okaidia.css"],"lang":{"shell":"shell","java":"java"},"ignore":["sequence"]},"js-sequence-diagram-full":{},"livereload":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"resource/Timer.md","mtime":"2018-11-20T10:43:01.812Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-12-22T07:42:26.625Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/sequence-diagram-min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-js-sequence-diagram-full/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

